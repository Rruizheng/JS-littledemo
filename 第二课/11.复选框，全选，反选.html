<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>复选框</title>
		<style>
			body,dl,dt,dd,p{margin: 0;padding: 0;}
			body{font-family: tahoma;font-size: 12px;}
			label,input,a {vertical-align: middle;}
			label{padding: 0 10px 0 5px;}
			dt{padding: 0 0 10px 0;border-bottom: 1px solid #666;}
			dt label {font-weight: 900;}
			dt a{text-decoration: none;}
			dt a:hover{color: red;}
			dl{width: 120px;background: #fafafa;border: 1px solid #666;border-radius: 5px;padding: 10px 5px;margin: 10px auto;}
			p{padding: 10px 0 0 0;}
		</style>
	</head>
	<body>
		<dl>
			<dt><input type="checkbox" id="checkAll" /><label>全选</label><a href="javascript:;">反选</a></dt>
			<dd>
				<p>
					<input type="checkbox" name="item" /><label>选项 (一)</label>
				</p>
				<p>
					<input type="checkbox" name="item" /><label>选项 (二)</label>
				</p>
				<p>
					<input type="checkbox" name="item" /><label>选项 (三)</label>
				</p>
				<p>
					<input type="checkbox" name="item" /><label>选项 (四)</label>
				</p>
				<p>
					<input type="checkbox" name="item" /><label>选项 (五)</label>
				</p>
				<p>
					<input type="checkbox" name="item" /><label>选项 (六)</label>
				</p>
				<p>
					<input type="checkbox" name="item" /><label>选项 (七)</label>
				</p>
				<p>
					<input type="checkbox" name="item" /><label>选项 (八)</label>
				</p>
				<p>
					<input type="checkbox" name="item" /><label>选项 (九)</label>
				</p>
				<p>
					<input type="checkbox" name="item" /><label>选项 (十)</label>
				</p>
			</dd>
		</dl>
		<center>1、切换全选/全不选文字；2、根据选中个数更新全选框状态；</center>
		<script>
			window.onload = function(){
				var oInput = document.getElementsByTagName("input");
				var oAll = document.getElementById("checkAll");
				var oFcheck = document.getElementsByTagName("a")[0];
				var oLabel = document.getElementsByTagName("label")[0];
				
				var isCheckAll = function(){
					for(var i=1,n=0; i<oInput.length; i++){
						oInput[i].checked && n++;
					}
					oInput[0].checked = (n==oInput.length-1);
					oLabel.innerHTML = oInput[0].checked?"全不选":"全选";
				};
				
				var CheckAll = function(){
					if(oInput[0].checked) for(var p in oInput) oInput[p].checked=true;
					if(!oInput[0].checked) for(var p in oInput) oInput[p].checked = false;
				};
				
				oInput[0].onclick = function(){
					CheckAll();
					isCheckAll();
				}
				
				oFcheck.onclick = function(){
					for(var i=1;i<oInput.length;i++){
						oInput[i].checked=!oInput[i].checked;
					}
					isCheckAll();
				}
				//根据每个复选框状态更新全选框状态
				for(var i=1;i<oInput.length;i++){
					oInput[i].onclick = function(){
						isCheckAll();
					}
				}
								
			}
		</script>
	</body>
</html>
